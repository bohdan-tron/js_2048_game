{"version":3,"sources":["scripts/main.js"],"names":["gameFieldRows","document","querySelectorAll","gameScore","querySelector","startButton","startMessage","winMessage","loseMessage","score","gameField","clearField","cellFilling","randomRow","Math","floor","random","randomCell","gameFieldFilling","row","cell","children","innerText","className","removeEventListener","arrowsChecker","classList","remove","loseCheck","gameOver","transposedField","transpose","zeroChecker","some","includes","arr","map","value","column","zeroRemover","filter","rowMerge","i","length","push","arrowRight","cells","reverse","num","arrowLeft","arrowUp","arrowDown","e","key","addEventListener","add","replace","hidden"],"mappings":"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","file":"main.0b0acf5d.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst gameFieldRows = document.querySelectorAll('.field-row');\nconst gameScore = document.querySelector('.game-score');\nconst startButton = document.querySelector('.start');\nconst startMessage = document.querySelector('.message-start');\nconst winMessage = document.querySelector('.message-win');\nconst loseMessage = document.querySelector('.message-lose');\n\nlet score = 0;\nlet gameField = clearField();\n\nfunction clearField() {\n  return [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n}\n\nstartButton.addEventListener('click', () => {\n  document.addEventListener('keyup', arrowsChecker);\n  winMessage.classList.add('hidden');\n  loseMessage.classList.add('hidden');\n\n  if (startButton.innerText === 'Start') {\n    startButton.innerText = 'Restart';\n    startButton.classList.replace('start', 'restart');\n    startMessage.hidden = true;\n  } else {\n    gameField = clearField();\n    score = 0;\n  }\n\n  cellFilling();\n  cellFilling();\n  gameFieldFilling();\n});\n\nfunction cellFilling() {\n  const randomRow = Math.floor(Math.random() * 4);\n  const randomCell = Math.floor(Math.random() * 4);\n\n  (gameField[randomRow][randomCell] === 0)\n    ? gameField[randomRow][randomCell]\n      = (Math.floor(Math.random() * 100) < 10 ? 4 : 2)\n    : cellFilling();\n}\n\nfunction gameFieldFilling() {\n  for (let row = 0; row < 4; row++) {\n    for (let cell = 0; cell < 4; cell++) {\n      gameFieldRows[row].children[cell].innerText\n        = gameField[row][cell] || '';\n\n      gameFieldRows[row].children[cell].className\n        = `field-cell field-cell--${gameField[row][cell]}`;\n\n      if (gameField[row][cell] === 2048) {\n        document.removeEventListener('keyup', arrowsChecker);\n        winMessage.classList.remove('hidden');\n      }\n    }\n  }\n\n  gameScore.innerText = score;\n  loseCheck();\n}\n\nfunction loseCheck() {\n  let gameOver = true;\n  const transposedField = transpose([...gameField]);\n  const zeroChecker = gameField.some(cell => cell.includes(0));\n\n  for (let row = 0; row < 4; row++) {\n    for (let cell = 0; cell < 3; cell++) {\n      if (gameField[row][cell] === gameField[row][cell + 1]\n        || transposedField[row][cell] === transposedField[row][cell + 1]) {\n        gameOver = false;\n      }\n    }\n  }\n\n  if (gameOver && !zeroChecker) {\n    document.removeEventListener('keyup', arrowsChecker);\n    loseMessage.classList.remove('hidden');\n  }\n}\n\nfunction transpose(arr) {\n  return arr.map((value, column) => arr.map(row => row[column]));\n}\n\nfunction zeroRemover(arr) {\n  return arr.filter(value => value !== 0);\n}\n\nfunction rowMerge(row) {\n  for (let i = 0; i < row.length; i++) {\n    if (row[i] === row[i + 1]) {\n      row[i] *= 2;\n      row[i + 1] = 0;\n      score += row[i];\n    }\n  }\n\n  zeroRemover(row);\n\n  while (row.length < 4) {\n    row.push(0);\n  }\n\n  return row;\n}\n\nfunction arrowRight() {\n  for (let row = 0; row < 4; row++) {\n    const cells = gameField[row].reverse().filter(num => num);\n\n    rowMerge(cells);\n    gameField[row] = cells.reverse();\n  }\n}\n\nfunction arrowLeft() {\n  for (let row = 0; row < 4; row++) {\n    const cells = gameField[row].filter(num => num);\n\n    rowMerge(cells);\n    gameField[row] = cells;\n  }\n}\n\nfunction arrowUp() {\n  gameField = transpose(gameField);\n  arrowLeft();\n  gameField = transpose(gameField);\n}\n\nfunction arrowDown() {\n  gameField = transpose(gameField);\n  arrowRight();\n  gameField = transpose(gameField);\n}\n\nfunction arrowsChecker(e) {\n  switch (e.key) {\n    case 'ArrowRight':\n      arrowRight();\n      cellFilling();\n      gameFieldFilling();\n      break;\n\n    case 'ArrowLeft':\n      arrowLeft();\n      cellFilling();\n      gameFieldFilling();\n      break;\n\n    case 'ArrowUp':\n      arrowUp();\n      cellFilling();\n      gameFieldFilling();\n      break;\n\n    case 'ArrowDown':\n      arrowDown();\n      cellFilling();\n      gameFieldFilling();\n      break;\n  }\n}\n"]}